(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[381],{6742:function(e,t,o){Promise.resolve().then(o.bind(o,2060))},2060:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return g}});var s=o(7437),n=o(2265),a=o(6651);let r=["#4f46e5","#db2777","#059669","#d97706","#6d28d9"],l={minX:0,minY:0,maxX:3e3,maxY:1500},i=e=>({x:e.position.x+60,y:e.position.y+30}),c=(e,t)=>({top:{x:e.position.x+60,y:e.position.y},right:{x:e.position.x+120,y:e.position.y+30},bottom:{x:e.position.x+60,y:e.position.y+60},left:{x:e.position.x,y:e.position.y+30}})[t],d=e=>({x:Math.max(l.minX,Math.min(l.maxX-120,e.x)),y:Math.max(l.minY,Math.min(l.maxY-60,e.y))}),m=()=>{let e=[];for(let t=l.minX;t<=l.maxX;t+=50)e.push((0,s.jsx)("line",{x1:t,y1:l.minY,x2:t,y2:l.maxY,stroke:"#e2e8f0",strokeWidth:t%200==0?1:.5,opacity:t%200==0?.3:.15},"v-".concat(t)));for(let t=l.minY;t<=l.maxY;t+=50)e.push((0,s.jsx)("line",{x1:l.minX,y1:t,x2:l.maxX,y2:t,stroke:"#e2e8f0",strokeWidth:t%200==0?1:.5,opacity:t%200==0?.3:.15},"h-".concat(t)));return e},x=function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];let o=arguments.length>3?arguments[3]:void 0;if(arguments.length>4&&arguments[4],e.id===t.id)return o&&"auto"!==o?{fromSide:o,toSide:o}:{fromSide:"top",toSide:"top"};let s=i(e),n=i(t),a=n.x-s.x,r=n.y-s.y;return Math.abs(a)>Math.abs(r)?{fromSide:a>0?"right":"left",toSide:a>0?"left":"right"}:{fromSide:r>0?"bottom":"top",toSide:r>0?"top":"bottom"}},u=function(e,t){let o,s,n,a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;arguments.length>5&&arguments[5];let c=40*l;if(r){let t,o,s,n;let a=80+30*l;switch(i){case"top":t=e.x-a/2,o=e.y-a,s=e.x+a/2,n=e.y-a;break;case"right":default:t=e.x+a,o=e.y-a/2,s=e.x+a,n=e.y+a/2;break;case"bottom":t=e.x+a/2,o=e.y+a,s=e.x-a/2,n=e.y+a;break;case"left":t=e.x-a,o=e.y+a/2,s=e.x-a,n=e.y-a/2}return"M ".concat(e.x," ").concat(e.y,"\n            C ").concat(t," ").concat(o,"\n              ").concat(s," ").concat(n,"\n              ").concat(e.x," ").concat(e.y)}let d=t.x-e.x,m=t.y-e.y,x=Math.min(.3*Math.sqrt(d*d+m*m),80);return Math.abs(d)>Math.abs(m)?(o=e.x+(d>0?x:-x),s=e.y+c,n=t.x+(d>0?-x:x),a=t.y+c):(o=e.x+c,s=e.y+(m>0?x:-x),n=t.x+c,a=t.y+(m>0?-x:x)),"M ".concat(e.x," ").concat(e.y," C ").concat(o," ").concat(s," ").concat(n," ").concat(a," ").concat(t.x," ").concat(t.y)};var h=e=>{let{components:t,connections:o,onComponentMove:a,onComponentAdd:h,onComponentRemove:p,onComponentEdit:f,onConnectionAdd:b,onConnectionEdit:g}=e,y=(0,n.useRef)(null),v=(0,n.useRef)(null),[j,N]=(0,n.useState)({scale:1,offsetX:0,offsetY:0}),[w,C]=(0,n.useState)({type:"none"}),[k,S]=(0,n.useState)({isConnecting:!1}),Y=(0,n.useCallback)((e,t)=>{if(!y.current)return{x:0,y:0};let o=y.current.getBoundingClientRect();return{x:(e-o.left-j.offsetX)/j.scale,y:(t-o.top-j.offsetY)/j.scale}},[j]);(0,n.useCallback)((e,t)=>({x:e*j.scale+j.offsetX,y:t*j.scale+j.offsetY}),[j]);let M=(0,n.useCallback)(e=>{let o=e.target,s=o.closest("[data-component-id]");if("circle"!==o.tagName&&"path"!==o.tagName&&"text"!==o.tagName&&"rect"!==o.tagName){if(s&&!o.closest("button")){let o=s.getAttribute("data-component-id"),n=t.find(e=>e.id===o);if(!n)return;let a=Y(e.clientX,e.clientY);C({type:"component",componentId:o,startPos:{x:e.clientX,y:e.clientY},componentOffset:{x:a.x-n.position.x,y:a.y-n.position.y}})}else C({type:"canvas",startPos:{x:e.clientX,y:e.clientY}});e.preventDefault()}},[t,Y]),X=(0,n.useCallback)(e=>{if(k.isConnecting){let t=Y(e.clientX,e.clientY);S(e=>({...e,currentPos:t}));return}if("component"===w.type&&w.componentId&&w.componentOffset){let t=Y(e.clientX,e.clientY),o=d({x:t.x-w.componentOffset.x,y:t.y-w.componentOffset.y});a(w.componentId,o)}else if("canvas"===w.type&&w.startPos){let t=e.clientX-w.startPos.x,o=e.clientY-w.startPos.y;N(e=>({...e,offsetX:e.offsetX+t,offsetY:e.offsetY+o})),C(t=>({...t,startPos:{x:e.clientX,y:e.clientY}}))}},[w,k,Y,a]),D=(0,n.useCallback)(e=>{if(k.isConnecting&&k.fromComponentId){let o=Y(e.clientX,e.clientY),s=e.target.closest("[data-component-id]"),n=null;if(s)n=s.getAttribute("data-component-id");else for(let e of t)if(o.x>=e.position.x&&o.x<=e.position.x+120&&o.y>=e.position.y&&o.y<=e.position.y+60){n=e.id;break}if(n){let e=t.find(e=>e.id===k.fromComponentId),o=t.find(e=>e.id===n);e&&o&&b&&b(k.fromComponentId,"auto",n,"auto")}S({isConnecting:!1})}C({type:"none"})},[k,b,t,Y]),O=(0,n.useCallback)((e,t)=>{e.stopPropagation(),S({isConnecting:!0,fromComponentId:t})},[]);(0,n.useCallback)(e=>{var t;if(!e.ctrlKey&&!e.metaKey)return;e.preventDefault(),e.stopPropagation();let o=e.deltaY>0?-.1:.1,s=Math.max(.25,Math.min(3,j.scale+o)),n=null===(t=y.current)||void 0===t?void 0:t.getBoundingClientRect();if(n){let t=e.clientX-n.left,o=e.clientY-n.top,a=s/j.scale;N({scale:s,offsetX:t-(t-j.offsetX)*a,offsetY:o-(o-j.offsetY)*a})}},[j]);let z=(0,n.useCallback)(e=>{var t;if(!e.ctrlKey&&!e.metaKey)return;e.preventDefault(),e.stopPropagation();let o=e.deltaY>0?-.15:.15,s=Math.max(.25,Math.min(3,j.scale+o)),n=null===(t=y.current)||void 0===t?void 0:t.getBoundingClientRect();if(n){let t=e.clientX-n.left,o=e.clientY-n.top,a=s/j.scale;N({scale:s,offsetX:t-(t-j.offsetX)*a,offsetY:o-(o-j.offsetY)*a})}},[j]),E=(0,n.useMemo)(()=>{let e={};return o.forEach(t=>{let o=[t.from,t.to].sort().join("-");e[o]||(e[o]=[]),e[o].push(t)}),Object.values(e).flatMap(e=>e.map((e,o)=>{let n,a;let l=t.find(t=>t.id===e.from),i=t.find(t=>t.id===e.to);if(!l||!i)return null;let d=l.id===i.id,{fromSide:m,toSide:h}=x(l,i,o,e.fromCorner,e.toCorner),p=c(l,m),f=d?p:c(i,h),b=u(p,f,d,o,m,h),g=40*o;if(d){let e=80+30*o;switch(m){case"top":default:n=p.x,a=p.y-e/2;break;case"right":n=p.x+e/2,a=p.y;break;case"bottom":n=p.x,a=p.y+e/2;break;case"left":n=p.x-e/2,a=p.y}}else Math.abs(f.x-p.x)>Math.abs(f.y-p.y)?(n=(p.x+f.x)/2,a=(p.y+f.y)/2+g-8):(n=(p.x+f.x)/2+g,a=(p.y+f.y)/2+15*o-8);let y=r[o%r.length],v="arrowhead-".concat(o%r.length);return(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:b,stroke:y,strokeWidth:2,fill:"none",markerEnd:"url(#".concat(v,")"),className:"transition-all duration-200 hover:stroke-width-3"}),(0,s.jsx)("text",{x:n,y:a,fontSize:12,fontWeight:"bold",fill:"#334155",textAnchor:"middle",className:"select-none",children:e.name})]},e.id)}))},[t,o,g]),A=(0,n.useMemo)(()=>{if(!k.isConnecting||!k.fromComponentId||!k.currentPos)return null;let e=t.find(e=>e.id===k.fromComponentId);if(!e)return null;let o=i(e),n="M ".concat(o.x," ").concat(o.y," L ").concat(k.currentPos.x," ").concat(k.currentPos.y);return(0,s.jsx)("path",{d:n,stroke:"#6366f1",strokeWidth:2,strokeDasharray:"8,4",fill:"none",markerEnd:"url(#arrowhead-temp)",opacity:.7})},[k,t]);return(0,s.jsxs)("div",{className:"relative w-full h-full bg-gradient-to-br from-slate-50 to-slate-100 border border-slate-200 rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"absolute top-4 right-4 z-20 flex flex-col gap-2 bg-white/90 backdrop-blur-sm rounded-lg p-2 shadow-lg",children:[(0,s.jsx)("button",{onClick:()=>N(e=>({...e,scale:Math.min(e.scale+.2,3)})),className:"w-8 h-8 flex items-center justify-center bg-white border border-slate-300 rounded-md hover:bg-slate-50 transition-colors",title:"Zoom In",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,s.jsx)("button",{onClick:()=>N(e=>({...e,scale:Math.max(e.scale-.2,.25)})),className:"w-8 h-8 flex items-center justify-center bg-white border border-slate-300 rounded-md hover:bg-slate-50 transition-colors",title:"Zoom Out",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),(0,s.jsx)("button",{onClick:()=>N({scale:1,offsetX:0,offsetY:0}),className:"w-8 h-8 flex items-center justify-center bg-white border border-slate-300 rounded-md hover:bg-slate-50 transition-colors",title:"Reset View",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),(0,s.jsxs)("div",{className:"absolute top-4 left-4 z-20 flex gap-2",children:[k.isConnecting&&(0,s.jsx)("div",{className:"bg-blue-500 text-white px-3 py-1.5 rounded-lg text-sm font-medium shadow-lg",children:"\uD83D\uDD17 Click a component to connect"}),(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm px-3 py-1.5 rounded-lg text-sm text-slate-600 shadow-lg",children:["Zoom: ",Math.round(100*j.scale),"% • Hold Ctrl+Scroll to zoom"]}),(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm px-3 py-1.5 rounded-lg text-sm text-slate-600 shadow-lg",children:["Canvas: ",l.maxX,"\xd7",l.maxY,"px"]})]}),(0,s.jsxs)("div",{ref:y,className:"w-full h-full cursor-grab active:cursor-grabbing",onMouseDown:M,onMouseMove:X,onMouseUp:D,onMouseLeave:()=>C({type:"none"}),onWheel:z,style:{cursor:k.isConnecting?"crosshair":"canvas"===w.type?"grabbing":"grab"},children:[(0,s.jsxs)("svg",{ref:v,className:"absolute",style:{transform:"translate(".concat(j.offsetX,"px, ").concat(j.offsetY,"px) scale(").concat(j.scale,")"),transformOrigin:"0 0",zIndex:1,width:l.maxX,height:l.maxY,left:0,top:0},onClick:e=>{let t=e.target;if(console.log("SVG clicked, target:",t.tagName,t),"path"===t.tagName||"text"===t.tagName){let e=t.closest("g");if(e){let t=e.getAttribute("data-connection-id");if(t){let e=o.find(e=>e.id===t);e&&(console.log("Connection found:",e),g(e))}}}},children:[(0,s.jsxs)("defs",{children:[r.map((e,t)=>(0,s.jsx)("marker",{id:"arrowhead-".concat(t),markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",markerUnits:"strokeWidth",children:(0,s.jsx)("path",{d:"M0,0 L0,7 L9,3.5 z",fill:e})},t)),(0,s.jsx)("marker",{id:"arrowhead-temp",markerWidth:"10",markerHeight:"10",refX:"9",refY:"3",orient:"auto",markerUnits:"strokeWidth",children:(0,s.jsx)("path",{d:"M0,0 L0,6 L9,3 z",fill:"#6366f1"})})]}),(0,s.jsx)("rect",{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY,fill:"none",stroke:"#cbd5e1",strokeWidth:2,strokeDasharray:"10,5",opacity:.5}),m(),E,A]}),(0,s.jsx)("div",{className:"absolute bg-white/50",style:{transform:"translate(".concat(j.offsetX,"px, ").concat(j.offsetY,"px) scale(").concat(j.scale,")"),transformOrigin:"0 0",zIndex:0,left:l.minX,top:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY,border:"2px dashed #cbd5e1",borderRadius:"8px"}}),(0,s.jsxs)("div",{className:"absolute",style:{transform:"translate(".concat(j.offsetX,"px, ").concat(j.offsetY,"px) scale(").concat(j.scale,")"),transformOrigin:"0 0",zIndex:2,left:0,top:0,width:l.maxX,height:l.maxY},children:[t.map(e=>(0,s.jsxs)("div",{"data-component-id":e.id,className:"absolute border-2 border-slate-300 rounded-lg shadow-lg bg-white hover:shadow-xl hover:border-indigo-400 transition-all duration-200 select-none",style:{left:e.position.x,top:e.position.y,width:120,height:60,backgroundColor:e.color||"#ffffff",cursor:"component"===w.type&&w.componentId===e.id?"grabbing":"grab"},children:[(0,s.jsxs)("div",{className:"p-3 h-full flex flex-col justify-center",children:[(0,s.jsx)("div",{className:"font-semibold text-sm text-slate-800 text-center",title:e.label,onDoubleClick:()=>null==f?void 0:f(e.id,e.label),children:e.label}),(0,s.jsx)("div",{className:"text-xs text-slate-500 text-center mt-1",title:e.type,children:e.type})]}),["top","right","bottom","left"].map(t=>(0,s.jsx)("div",{className:"absolute w-2 h-2 bg-blue-500 rounded-full opacity-0 hover:opacity-100 transition-opacity cursor-crosshair z-10",style:{...{top:{top:-4,left:"50%",transform:"translateX(-50%)"},right:{top:"50%",right:-4,transform:"translateY(-50%)"},bottom:{bottom:-4,left:"50%",transform:"translateX(-50%)"},left:{top:"50%",left:-4,transform:"translateY(-50%)"}}[t],width:8,height:8},onMouseDown:t=>O(t,e.id),title:"Connect from ".concat(t)},t)),(0,s.jsx)("button",{className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600 transition-colors shadow-md z-10",onClick:t=>{t.stopPropagation(),p(e.id)},title:"Remove component",children:"\xd7"}),(0,s.jsx)("button",{className:"absolute -bottom-2 -right-2 w-5 h-5 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-blue-600 transition-colors shadow-md z-10",onMouseDown:t=>O(t,e.id),title:"Create connection",children:"+"})]},e.id)),0===t.length&&(0,s.jsx)("div",{className:"absolute flex items-center justify-center",style:{left:l.maxX/2-150,top:l.maxY/2-100,width:300,height:200},children:(0,s.jsxs)("div",{className:"text-center p-8 bg-white/90 backdrop-blur-sm rounded-xl shadow-lg border-2 border-dashed border-slate-300",children:[(0,s.jsx)("div",{className:"text-4xl mb-4",children:"\uD83C\uDFD7️"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Start Building"}),(0,s.jsx)("p",{className:"text-slate-600 text-sm",children:"Drag components from the palette"}),(0,s.jsx)("p",{className:"text-slate-500 text-xs mt-2",children:"Stay within the dashed boundary"})]})})]})]})]})},p=o(798),f=o(492);function b(e){if(!e.name||!e.type)return console.error("Validation Error: Architecture missing name or type."),!1;let t=new Set;for(let o of e.components){if(!o.id||!o.type||!o.label||"number"!=typeof o.position.x||"number"!=typeof o.position.y)return console.error("Validation Error: Component missing required fields.",o),!1;if(t.has(o.id))return console.error("Validation Error: Duplicate component ID found.",o.id),!1;t.add(o.id)}let o=new Set;for(let s of e.connections){if(!s.id||!s.name||!s.from||!s.to||!s.type)return console.error("Validation Error: Connection missing required fields.",s),!1;if(o.has(s.id))return console.error("Validation Error: Duplicate connection ID found.",s.id),!1;if(o.add(s.id),!t.has(s.from)||!t.has(s.to))return console.error("Validation Error: Connection references non-existent component.",s),!1}return!0}var g=()=>{var e,t;let[o,r]=(0,n.useState)({name:"My Architecture",type:"microservices",components:[{id:"api-gateway",type:"gateway",position:{x:100,y:200},label:"API Gateway",color:"#dbeafe"},{id:"user-service",type:"service",position:{x:300,y:200},label:"User Service",color:"#dcfce7"},{id:"database",type:"database",position:{x:500,y:200},label:"Database",color:"#f0f9ff"}],connections:[{id:"conn-1",from:"api-gateway",to:"user-service",type:"http",name:"Request"},{id:"conn-2",from:"user-service",to:"database",type:"query",name:"GetUser"}]}),[l,i]=(0,n.useState)(!1),[c,d]=(0,n.useState)([]),[m,x]=(0,n.useState)(""),[u,g]=(0,n.useState)([{type:"gateway",label:"API Gateway",color:"#dbeafe"},{type:"service",label:"Service",color:"#dcfce7"},{type:"database",label:"Database",color:"#f0f9ff"},{type:"queue",label:"Message Queue",color:"#fdf4ff"}]),[y,v]=(0,n.useState)(""),[j,N]=(0,n.useState)(""),[w,C]=(0,n.useState)("#ffffff"),[k,S]=(0,n.useState)(!1),[Y,M]=(0,n.useState)(null),[X,D]=(0,n.useState)(""),[O,z]=(0,n.useState)(""),[E,A]=(0,n.useState)("#ffffff"),[I,P]=(0,n.useState)(!1),[_,L]=(0,n.useState)(null),[R,W]=(0,n.useState)("");(0,n.useEffect)(()=>{let e=localStorage.getItem("architectureBuilder");if(e)try{r(JSON.parse(e))}catch(e){console.error("Failed to parse saved architecture",e)}let t=localStorage.getItem("customComponents");if(t)try{g(JSON.parse(t))}catch(e){console.error("Failed to parse saved custom components",e)}},[]),(0,n.useEffect)(()=>{localStorage.setItem("architectureBuilder",JSON.stringify(o))},[o]),(0,n.useEffect)(()=>{localStorage.setItem("customComponents",JSON.stringify(u))},[u]),(0,n.useCallback)(()=>{let e=[];return o.name.trim()||e.push("Architecture name is required"),0===o.components.length&&e.push("At least one component is required"),b(o)||e.push("Architecture data integrity check failed"),d(e),0===e.length},[o]);let T=(0,n.useCallback)(()=>{window.open("https://github.com/eren9677/awesome-multi-agent-architectures/pulls","_blank","noopener,noreferrer")},[]),B=(0,n.useCallback)(()=>{i(e=>!e)},[]),H=(0,n.useCallback)((e,t)=>{r(o=>({...o,components:o.components.map(o=>o.id===e?{...o,position:t}:o)}))},[]),J=(0,n.useCallback)(e=>{var t,o,s,n;let a=(t=e.type,o=e.position,s=e.label,n=e.color,{id:"component-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),type:t,position:o,label:s,color:n});r(e=>({...e,components:[...e.components,a]}))},[]),V=(0,n.useCallback)(e=>{r(t=>({...t,components:t.components.filter(t=>t.id!==e),connections:t.connections.filter(t=>t.from!==e&&t.to!==e)}))},[]);(0,n.useCallback)((e,t)=>{r(o=>({...o,components:o.components.map(o=>o.id===e?{...o,label:t}:o)}))},[]);let q=(0,n.useCallback)(e=>{M(e),D(e.label),z(e.type),A(e.color||"#ffffff"),S(!0)},[]),F=(0,n.useCallback)(()=>{Y&&(r(e=>({...e,components:e.components.map(e=>e.id===Y.id?{...e,label:X,type:O,color:E}:e)})),S(!1),M(null))},[Y,X,O,E]),U=(0,n.useCallback)((e,t,s,n)=>{let a=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"custom",s=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"auto",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"auto";return{id:"conn-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:s,from:e,to:t,type:o,fromCorner:n,toCorner:a}}(e,s,"custom","Connection ".concat(o.connections.length+1),t,n);r(e=>({...e,connections:[...e.connections,a]})),setTimeout(()=>{b(o)?console.log("Architecture data integrity maintained"):console.error("Architecture data integrity compromised")},0)},[o]),G=(0,n.useCallback)(e=>{L(e),W(e.name),P(!0)},[]),K=(0,n.useCallback)(()=>{_&&(r(e=>({...e,connections:e.connections.map(e=>e.id===_.id?{...e,name:R}:e)})),P(!1),L(null))},[_,R]),Z=(0,n.useCallback)((e,t,o)=>{J({type:e,position:{x:200,y:200},label:t,color:o})},[J]),$=(0,n.useCallback)(()=>{if(y.trim()&&j.trim()){let e={type:y.trim(),label:j.trim(),color:w};g(t=>[...t,e]),v(""),N(""),C("#ffffff")}},[y,j,w]),Q=(0,n.useCallback)(e=>{g(t=>t.filter((t,o)=>o!==e))},[]),ee=(0,n.useCallback)(()=>{let e=prompt("Paste the architecture code (JSON format) to import:");if(e)try{let t=JSON.parse(e);"string"==typeof t.name&&"string"==typeof t.type&&Array.isArray(t.components)&&Array.isArray(t.connections)?(r(t),alert("Architecture imported successfully!")):alert("Invalid architecture format")}catch(e){alert("Invalid JSON format")}},[]),et=(0,n.useCallback)(()=>{let e=JSON.stringify(o,null,2);navigator.clipboard.writeText(e).then(()=>{x("Copied!"),setTimeout(()=>x(""),2e3)}).catch(e=>{x("Failed to copy"),console.error("Failed to copy: ",e),setTimeout(()=>x(""),2e3)})},[o]);return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8",children:[(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsxs)("header",{className:"mb-6 sm:mb-8",children:[(0,s.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Architecture Builder"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Create and visualize your multi-agent architecture"}),(0,s.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:[(0,s.jsx)("span",{className:"inline-block bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Tip:"}),(0,s.jsx)("span",{className:"ml-2",children:"Drag components from the palette to the canvas to build your architecture"}),(0,s.jsx)("span",{className:"ml-2",children:"Click the + button or connection points to start connecting components"}),(0,s.jsx)("span",{className:"ml-2",children:"Components can connect to themselves and multiple other components"})]})]}),c.length>0&&(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[(0,s.jsx)("h3",{className:"text-red-800 font-medium mb-2",children:"Validation Errors"}),(0,s.jsx)("ul",{className:"list-disc pl-5 space-y-1",children:c.map((e,t)=>(0,s.jsx)("li",{className:"text-red-600",children:e},t))})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-6 sm:mb-8",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 sm:mb-6 gap-3",children:[(0,s.jsx)("h2",{className:"text-lg sm:text-xl font-semibold",children:"Architecture Canvas"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[o.connections.map(e=>{let t=o.components.find(t=>t.id===e.from),n=o.components.find(t=>t.id===e.to),a=(null==t?void 0:t.label)||e.from,r=(null==n?void 0:n.label)||e.to;return(0,s.jsx)("button",{onClick:()=>G(e),className:"px-3 py-1 bg-blue-500 hover:bg-blue-600 hover:shadow-lg text-white rounded text-sm transition-all duration-200 group",title:'Edit connection from "'.concat(a,'" to "').concat(r,'": ').concat(e.name),children:(0,s.jsx)("span",{className:"block",children:(0,s.jsxs)("span",{className:"group-hover:font-semibold transition-all duration-200",children:["✎ ",a," → ",r,": ",e.name]})})},e.id)}),(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)(a.z,{onClick:ee,variant:"secondary",size:"sm",children:"Import"}),(0,s.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap",children:"Import architecture from JSON"})]}),(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)(a.z,{onClick:B,variant:"secondary",size:"sm",children:l?"Edit Mode":"Preview Mode"}),(0,s.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap",children:l?"Switch back to edit mode":"Preview how this will look on the site"})]}),(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)(a.z,{onClick:T,variant:"primary",size:"sm",children:"Export to GitHub"}),(0,s.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap",children:"Create GitHub issue with this architecture"})]})]})]}),(0,s.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg h-64 sm:h-96",children:l?(0,s.jsxs)("div",{className:"w-full h-full flex flex-col bg-gray-50 p-4 overflow-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("h3",{className:"text-lg sm:text-xl font-semibold mb-2",children:"Architecture Preview"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"This is how your architecture will appear on the site"})]}),(0,s.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm max-w-3xl w-full",children:[(0,s.jsxs)("div",{className:"mb-6 text-center",children:[(0,s.jsx)("h4",{className:"text-lg font-medium mb-2",children:o.name}),(0,s.jsxs)("p",{className:"text-gray-600 text-sm mb-4",children:["Type: ",o.type]})]}),(0,s.jsx)("div",{className:"flex justify-center mb-6",children:(0,s.jsx)(p.r,{components:o.components,connections:o.connections,width:450,height:200,className:"border border-gray-100"})}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 justify-center",children:o.components.map(e=>(0,s.jsx)("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:e.label},e.id))})]})})]}):(0,s.jsx)(h,{components:o.components,connections:o.connections,onComponentMove:H,onComponentAdd:J,onComponentRemove:V,onComponentEdit:(e,t)=>{let s=o.components.find(t=>t.id===e);s&&q(s)},onConnectionAdd:U,onConnectionEdit:G})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Architecture Code"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("button",{onClick:et,className:"flex items-center gap-1 text-xs bg-gray-200 hover:bg-gray-300 text-gray-700 px-2 py-1 rounded transition-colors",title:"Copy architecture code",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),m||"Copy"]}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"Read-only"})]})]}),(0,s.jsx)("pre",{className:"bg-gray-100 p-4 rounded-md overflow-x-auto text-xs",children:(0,s.jsx)("code",{children:JSON.stringify(o,null,2)})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Component Palette"}),(0,s.jsxs)("div",{className:"mb-6 p-3 bg-gray-50 rounded-md",children:[(0,s.jsx)("h4",{className:"font-medium mb-2",children:"Add Custom Component"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-2",children:[(0,s.jsx)("input",{type:"text",placeholder:"Component Type",value:y,onChange:e=>v(e.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm"}),(0,s.jsx)("input",{type:"text",placeholder:"Component Label",value:j,onChange:e=>N(e.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm"}),(0,s.jsx)("input",{type:"color",value:w,onChange:e=>C(e.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm w-full"})]}),(0,s.jsx)(a.z,{variant:"primary",size:"sm",onClick:$,disabled:!y.trim()||!j.trim(),children:"Add to Palette"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h4",{className:"font-medium mb-2",children:"Your Components"}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-40 overflow-y-auto",children:u.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-sm",children:e.label}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.type})]}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)(a.z,{variant:"secondary",size:"sm",onClick:()=>Z(e.type,e.label,e.color),children:"Add"}),(0,s.jsx)("button",{className:"text-red-500 hover:text-red-700",onClick:()=>Q(t),children:"\xd7"})]})]},t))})]}),(0,s.jsxs)("div",{className:"mt-4 text-xs text-gray-500",children:[(0,s.jsx)("p",{className:"mb-1",children:"• Double-click on components to edit their properties"}),(0,s.jsx)("p",{className:"mb-1",children:"• Click the + button or connection points to start connections"}),(0,s.jsx)("p",{className:"mb-1",children:"• Components can connect to themselves (self-connections)"}),(0,s.jsx)("p",{children:"• No limit on the number of connections between components"})]})]})]})]}),(0,s.jsx)(f.u,{isOpen:k,onClose:()=>S(!1),title:"Edit Component",size:"sm",children:Y&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Label"}),(0,s.jsx)("input",{type:"text",value:X,onChange:e=>D(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,s.jsx)("input",{type:"text",value:O,onChange:e=>z(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),(0,s.jsx)("input",{type:"color",value:E,onChange:e=>A(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,s.jsx)(a.z,{variant:"secondary",onClick:()=>S(!1),children:"Cancel"}),(0,s.jsx)(a.z,{variant:"primary",onClick:F,children:"Save"})]})]})}),(0,s.jsx)(f.u,{isOpen:I,onClose:()=>P(!1),title:"Edit Connection",size:"sm",children:_&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md mb-4",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Connection Details"}),(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium",children:"From:"}),(0,s.jsx)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs",children:(null===(e=o.components.find(e=>e.id===_.from))||void 0===e?void 0:e.label)||_.from})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsx)("span",{className:"font-medium",children:"To:"}),(0,s.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs",children:(null===(t=o.components.find(e=>e.id===_.to))||void 0===t?void 0:t.label)||_.to})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Connection Name"}),(0,s.jsx)("input",{type:"text",value:R,onChange:e=>W(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",placeholder:"Enter a descriptive name for this connection"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center gap-2 pt-4",children:[(0,s.jsx)("button",{className:"text-red-600 hover:text-red-700 text-sm font-medium",onClick:()=>{_&&confirm("Delete this connection? This action cannot be undone.")&&(r(e=>({...e,connections:e.connections.filter(e=>e.id!==_.id)})),P(!1),L(null))},title:"Delete this connection",children:"Delete"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(a.z,{variant:"secondary",onClick:()=>P(!1),children:"Cancel"}),(0,s.jsx)(a.z,{variant:"primary",onClick:K,children:"Save"})]})]})]})})]})}},622:function(e,t,o){"use strict";var s=o(2265),n=Symbol.for("react.element"),a=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),r=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function i(e,t,o){var s,i={},c=null,d=null;for(s in void 0!==o&&(c=""+o),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,s)&&!l.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===i[s]&&(i[s]=t[s]);return{$$typeof:n,type:e,key:c,ref:d,props:i,_owner:r.current}}t.jsx=i,t.jsxs=i},7437:function(e,t,o){"use strict";e.exports=o(622)}},function(e){e.O(0,[321,971,938,744],function(){return e(e.s=6742)}),_N_E=e.O()}]);